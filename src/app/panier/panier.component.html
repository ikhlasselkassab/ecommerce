<app-navebar></app-navebar>

<div class="panier-container">
  <table class="table panier-table table-bordered">
    <thead>
    <tr>
      <th>Image</th>
      <th>Produit</th>
      <th>Quantité</th>
      <th>Prix Unitaire</th>
      <th>Total</th>
      <th> </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of cartItems">
      <td>
        <img [src]="item.product.images[0]" alt="{{ item.product.title }}" class="product-img">
      </td>
      <td>{{ item.product.title }}</td>

      <td>
        <div class="quantity-control">
          <button class="btn btn-light" (click)="decreaseQuantity(item)">-</button>
          <input type="text" [value]="item.qte" class="quantity-input" readonly>
          <button class="btn btn-light" (click)="increaseQuantity(item)">+</button>
        </div>
      </td>
      <td>{{ item.product.price }} DH</td>
      <td>{{ item.qte * item.product.price }} DH</td>
      <td>
        <button class="btn btn-danger" (click)="removeItem(item.product.id)">Supprimer</button>
      </td>
    </tr>
    </tbody>
  </table>

  <p class="total"><strong>Total : {{ getTotal() }} DH</strong></p>

  <!-- Checkout or login button depending on authentication status -->
  <button *ngIf="isAuthenticated()" class="btn btn-primary" (click)="checkout()">Valider mon panier</button>
  <button *ngIf="!isAuthenticated()" class="btn btn-warning" (click)="checkout()">Se connecter pour valider</button>

  <!-- Logout button (visible only if authenticated) -->
  <button *ngIf="isAuthenticated()" class="btn btn-danger" (click)="logout()">Se déconnecter</button>
</div>
